{
  "hash": "cb6fa78e08662f70a828e7d0a55b86da",
  "result": {
    "markdown": "# NA {#na}\n\n\n::: {.cell}\n\n:::\n\n\n## NA とは\n\n::: callout-tip\n\n::: {.cell}\n\n:::\n\n\nTIP 084 NA とは\n:::\n\nR には、欠損値として `NULL`、`NA`、`NaN` があります。\n\nエクセルや CSV などからデータをインポートする際に、データの入っていないセルは `NA` と表示されます。\n\n\n\n\n\nまず、データフレームを用意します。それぞれ、データ型を表している列名になっています。\n\nRStudio でデータフレームを表示させると、通常は `NA` と表示されます。なお、RStudio 上では、Factor は `NA` とは表示されないようです。\n\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div class=\"datatables html-widget html-fill-item\" id=\"htmlwidget-b13eea4faf37eb9135ac\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-b13eea4faf37eb9135ac\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\"],[\"1\",null,\"3\"],[\"Sato\",\"Takahashi\",null],[null,2.7,3.4]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>Factor<\\/th>\\n      <th>Character<\\/th>\\n      <th>Double<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"rowCallback\":\"function(row, data){\\n  for(var i=0; i<data.length; i++){\\n    if(data[i] === null){\\n      $('td:eq('+i+')', row).html('NA')\\n        .css({'color': 'rgb(151,151,151)', 'font-style': 'italic'});\\n    }\\n  }\\n}\",\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":3},{\"orderable\":false,\"targets\":0},{\"name\":\" \",\"targets\":0},{\"name\":\"Factor\",\"targets\":1},{\"name\":\"Character\",\"targets\":2},{\"name\":\"Double\",\"targets\":3}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[\"options.rowCallback\"],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\nNA かどうかを確認するには、`is.na()` 関数を使います。\n\n\n::: {.cell}\n\n```{.r .cell-code}\nis.na(df[2,\"Factor\"])\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] TRUE\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nis.na(df[3,\"Character\"])\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] TRUE\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nis.na(df[1,\"Double\"])\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] TRUE\n```\n:::\n:::\n\n\n## 数える\n\n::: callout-tip\n\n::: {.cell}\n\n:::\n\n\nTIP 085 指定した列の `NA` を数える\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsum(is.na(df$Double))\n```\n:::\n\n\n## 置き換え\n\n::: callout-tip\n\n::: {.cell}\n\n:::\n\n\nTIP 086 すべての列の置き換え\n:::\n\nすべての列の NA を 0 に置き換えます。ただし、Factor 型のレベルに 0 がないと警告が出ます。\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf[is.na(df)] <- 0\n```\n:::\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n```\nWarning in `[<-.factor`(`*tmp*`, thisvar, value = 0): invalid factor level, NA\ngenerated\n```\n:::\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"datatables html-widget html-fill-item\" id=\"htmlwidget-3f5407f30111df6a01c2\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-3f5407f30111df6a01c2\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\"],[\"1\",null,\"3\"],[\"Sato\",\"Takahashi\",\"0\"],[0,2.7,3.4]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>Factor<\\/th>\\n      <th>Character<\\/th>\\n      <th>Double<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"rowCallback\":\"function(row, data){\\n  for(var i=0; i<data.length; i++){\\n    if(data[i] === null){\\n      $('td:eq('+i+')', row).html('NA')\\n        .css({'color': 'rgb(151,151,151)', 'font-style': 'italic'});\\n    }\\n  }\\n}\",\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":3},{\"orderable\":false,\"targets\":0},{\"name\":\" \",\"targets\":0},{\"name\":\"Factor\",\"targets\":1},{\"name\":\"Character\",\"targets\":2},{\"name\":\"Double\",\"targets\":3}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[\"options.rowCallback\"],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n::: callout-tip\n\n::: {.cell}\n\n:::\n\n\nTIP 087 指定した列の置き換え\n:::\n\nDouble 列の `NA` を 0 に置き換えます。\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf[is.na(df$Double),\"Double\"] <- 0\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div class=\"datatables html-widget html-fill-item\" id=\"htmlwidget-f02de60622c1895c3aea\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-f02de60622c1895c3aea\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\"],[\"1\",null,\"3\"],[\"Sato\",\"Takahashi\",null],[0,2.7,3.4]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>Factor<\\/th>\\n      <th>Character<\\/th>\\n      <th>Double<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"rowCallback\":\"function(row, data){\\n  for(var i=0; i<data.length; i++){\\n    if(data[i] === null){\\n      $('td:eq('+i+')', row).html('NA')\\n        .css({'color': 'rgb(151,151,151)', 'font-style': 'italic'});\\n    }\\n  }\\n}\",\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":3},{\"orderable\":false,\"targets\":0},{\"name\":\" \",\"targets\":0},{\"name\":\"Factor\",\"targets\":1},{\"name\":\"Character\",\"targets\":2},{\"name\":\"Double\",\"targets\":3}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[\"options.rowCallback\"],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n::: {.cell}\n\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/htmltools-fill-0.5.8.1/fill.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<link href=\"site_libs/datatables-css-0.0.0/datatables-crosstalk.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/datatables-binding-0.33/datatables.js\"></script>\n<script src=\"site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css\" rel=\"stylesheet\" />\n<link href=\"site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js\"></script>\n<link href=\"site_libs/crosstalk-1.2.1/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/crosstalk-1.2.1/js/crosstalk.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}