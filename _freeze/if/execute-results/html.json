{
  "hash": "0d199bf610d9096c01bee632a61c1aed",
  "result": {
    "markdown": "# if {#if}\n\n\n::: {.cell}\n\n:::\n\n\n::: callout-tip\n\n::: {.cell}\n\n:::\n\n\nTIP 053 if\n:::\n\nR における if の基本\n\n\n::: {.cell}\n\n```{.r .cell-code}\na <- 2\nif (a == 1) {\n  print(\"a is one.\")\n} else if (a == 2) {\n  print(\"a is two.\")\n} else {\n  print(\"a is neither 1 nor 2.\")\n}\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"a is two.\"\n```\n:::\n:::\n\n\n\n::: callout-tip\n\n::: {.cell}\n\n:::\n\n\nTIP 054 `ifelse()`\n:::\n\nR には if else を行う関数もある。ベクタやデータフレームにも使える。\n\n\n::: {.cell}\n\n```{.r .cell-code}\nresult <- data.frame(\n  student = c(\"Yamada\", \"Sato\", \"Takahashi\"),\n  score = c(45, 90, 65)\n)\nresult$pass <- ifelse (result$score >= 60, \"PASS\", \"FAIL\")\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div class=\"datatables html-widget html-fill-item\" id=\"htmlwidget-be063741e01a2b2bf1e6\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-be063741e01a2b2bf1e6\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\"],[\"Yamada\",\"Sato\",\"Takahashi\"],[45,90,65],[\"FAIL\",\"PASS\",\"PASS\"]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>student<\\/th>\\n      <th>score<\\/th>\\n      <th>pass<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":2},{\"orderable\":false,\"targets\":0},{\"name\":\" \",\"targets\":0},{\"name\":\"student\",\"targets\":1},{\"name\":\"score\",\"targets\":2},{\"name\":\"pass\",\"targets\":3}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n::: callout-tip\n\n::: {.cell}\n\n:::\n\n\nTIP 055 `switch()`\n:::\n\n`switch()` 関数は、条件が複数あり、if else をたくさん書くような場合にコンパクトに書くことができる。\n\n\n::: {.cell}\n\n```{.r .cell-code}\nswitch (3, \"frailty\", \"frailty\", \"frailty\", \"prefrailty\", \"prefrailty\", \"robust\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"frailty\"\n```\n:::\n:::\n\n\nただし、条件にベクトルやデータフレームを使うことができない点が不便。**{dplyr}** の `case_when()` 関数を使うと、データフレームにも適用できる。\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\ndfFrailty <- data.frame(\n  id = 1:6,\n  score = c(5, 4, 2, 0, 0, 1)\n)\ndfFrailty$frailty <- case_when(dfFrailty$score == 0 ~ \"robust\",\n                        dfFrailty$score == 1 ~ \"prefrailty\",\n                        dfFrailty$score == 2 ~ \"prefrailty\",\n                        dfFrailty$score >= 3 ~ \"frailty\")\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div class=\"datatables html-widget html-fill-item\" id=\"htmlwidget-a31c6794abc70605fc49\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-a31c6794abc70605fc49\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\"],[1,2,3,4,5,6],[5,4,2,0,0,1],[\"frailty\",\"frailty\",\"prefrailty\",\"robust\",\"robust\",\"prefrailty\"]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>id<\\/th>\\n      <th>score<\\/th>\\n      <th>frailty<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[1,2]},{\"orderable\":false,\"targets\":0},{\"name\":\" \",\"targets\":0},{\"name\":\"id\",\"targets\":1},{\"name\":\"score\",\"targets\":2},{\"name\":\"frailty\",\"targets\":3}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n## 論理テスト\n\n::: callout-tip\n\n::: {.cell}\n\n:::\n\n\nTIP 056: 論理演算\n:::\n\n論理演算は、「i は 1 よりも大きいか?」「i の中に 1 は入っているか?」などの比較を行うことです。\n\n| 演算子 | 構文 | テスト |\n| ------ | ---- | ------ |\n| `>` | `a > b` | a は b より大きいか? |\n| `>=` | `a >= b` | a は b 以上か? |\n| `<` | `a >= b` | a は b より小さいか? |\n| `<=` | `a <= b` | a は b 以上か? |\n| `==` | `a == b` | a と b は等しいか? |\n| `!=` | `a != b` | a と b は等しくないか? |\n| `%in%` | `a %in c(1, 2, 3)` | a は、1, 2, 3 のうちいずれかの値か? |\n\n::: callout-tip\n\n::: {.cell}\n\n:::\n\n\nTIP 057: 論理演算: 異なる mode の比較\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nif (\"1\" == 1){\n  print(\"character と numeric も比較可能\")\n} else {\n  print(\"xcharacter と numeric は比較不可能\")\n}\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"character と numeric も比較可能\"\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nif (TRUE == 1){\n  print(\"TRUE は 1\")\n} else {\n  print(\"TRUE は 0\")\n}\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"TRUE は 1\"\n```\n:::\n:::\n\n\n\n::: callout-tip\n\n::: {.cell}\n\n:::\n\n\nTIP 058: 論理演算: NA\n:::\n\nベクトルが NA であると、論理演算の結果は NA となります。\n\n\n::: {.cell}\n\n```{.r .cell-code}\n1 == NA\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] NA\n```\n:::\n:::\n\n\nこの場合、まず、NA であるかどうかを判定する必要があります。\n\n以下の様な条件式は、エラーとなります。\n\n\n::: {.cell}\n\n```{.r .cell-code}\nx <- NA\nif (x == 1){\n  print(\"x is larger than 1.\")\n} else {\n  print(\"x is not larger than 1.\")\n}\n```\n:::\n\n```\nError in if (x == 1) { : missing value where TRUE/FALSE needed\n```\n\nこのエラーメッセージは、 (x == 1) が TRUE でも FALSE でもない (NA) ために発生しています。\n\n## ブール演算\n\n::: callout-tip\n\n::: {.cell}\n\n:::\n\n\nTIP 059: ブール演算\n:::\n\nブール演算とは、\n\n\n| 演算子 | 構文 | テスト |\n| ------ | ---- | ------ |\n| `&` | `cond1 & cond2` | AND |\n| `|` | `cond1 | cond2` | OR: Shift + 0 の３つ右にあるキー |\n| `xor` | `a zorb` | a は b より小さいか? |\n| `!` | `!cond` | 例: `!is.na(x)` は x は NA でない |\n| `all` | `all(cond1, cond2, cond3)` | `&` の拡張 |\n| `any` | `any(cond1, cond2, cond3)` | `|` の拡張 |\n\n\n\n\n::: {.cell}\n\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/htmltools-fill-0.5.8.1/fill.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<link href=\"site_libs/datatables-css-0.0.0/datatables-crosstalk.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/datatables-binding-0.33/datatables.js\"></script>\n<script src=\"site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css\" rel=\"stylesheet\" />\n<link href=\"site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js\"></script>\n<link href=\"site_libs/crosstalk-1.2.1/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/crosstalk-1.2.1/js/crosstalk.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}